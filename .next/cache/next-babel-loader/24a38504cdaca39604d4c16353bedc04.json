{"ast":null,"code":"var _jsxFileName = \"/Users/mj/repo/siliconrhino/components/search/Search.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport styled from 'styled-components';\nimport { useState, useEffect } from 'react';\nimport { DebounceInput } from 'react-debounce-input';\nimport axios from 'axios';\nimport EventThumbnail from '../event/EventThumbnail';\nconst SearchWrapper = styled.div.withConfig({\n  displayName: \"Search__SearchWrapper\",\n  componentId: \"sc-1flz1c3-0\"\n})([\"\"]);\nconst SearchParamButton = styled.div.withConfig({\n  displayName: \"Search__SearchParamButton\",\n  componentId: \"sc-1flz1c3-1\"\n})([\"display:grid;justify-content:center;place-items:center;font-weight:bold;border:1px solid black;box-shadow:0 0 0 0 black;background:\", \";\"], props => props.isSelected ? 'blue' : 'none');\nconst SearchInput = styled(DebounceInput).withConfig({\n  displayName: \"Search__SearchInput\",\n  componentId: \"sc-1flz1c3-2\"\n})([\"width:50%;border:1px solid black;\"]);\nconst PageNumberButtonWrapper = styled.div.withConfig({\n  displayName: \"Search__PageNumberButtonWrapper\",\n  componentId: \"sc-1flz1c3-3\"\n})([\"display:flex;justify-content:space-around;\"]);\n\nconst Search = () => {\n  const {\n    0: pageNo,\n    1: selectPageNo\n  } = useState(1);\n  const {\n    0: pageSize,\n    1: setPageSize\n  } = useState(2);\n  const {\n    0: searchQ,\n    1: setSearchQ\n  } = useState('');\n  const {\n    0: allEvents,\n    1: setEvents\n  } = useState([]);\n  const {\n    0: isLoading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: isError,\n    1: setError\n  } = useState(false);\n  const {\n    0: eventsNo,\n    1: setEventsNo\n  } = useState(0);\n  useEffect(() => {\n    getEvents();\n  }, []);\n  useEffect(() => {\n    getEvents();\n  }, [pageSize, pageNo, searchQ]);\n\n  const getEvents = async () => {\n    setLoading(true);\n\n    try {\n      const res = await axios.get(`https://mock-api.drinks.test.siliconrhino.io/events?page=${pageNo}&pageSize=${pageSize}&search=${searchQ}`);\n      const evnts = res.data;\n      setEvents(evnts);\n      setEventsNo(evnts.length + 1);\n      setLoading(false);\n    } catch (err) {\n      setLoading(false);\n      setError(true);\n    }\n  };\n\n  if (isError) {\n    return __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Failed to load data.\");\n  }\n\n  return __jsx(SearchWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, __jsx(SearchInput, {\n    minLength: 1,\n    debounceTimeout: 300,\n    placeholder: 'asdf' //@ts-ignore\n    ,\n    onChange: event => setSearchQ(event.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"events: \"), isLoading ? __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"loading...\") : allEvents.map(event => __jsx(EventThumbnail, {\n    id: event.id,\n    time: event.time,\n    title: event.title,\n    creator: event.creator,\n    guests: event.guests,\n    type: event.type,\n    location: event.location,\n    comments: event.comments,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), __jsx(PageNumberButtonWrapper, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Current page:\"), __jsx(SearchParamButton, {\n    isSelected: pageNo === 1,\n    onClick: () => selectPageNo(1),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, \"1\"), eventsNo > pageSize && __jsx(SearchParamButton, {\n    isSelected: pageNo === 2,\n    onClick: () => selectPageNo(2),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"2\"), eventsNo > pageSize * 2 && __jsx(SearchParamButton, {\n    isSelected: pageNo === 2,\n    onClick: () => selectPageNo(2),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"2\"), __jsx(SearchParamButton, {\n    isSelected: pageNo === 3,\n    onClick: () => selectPageNo(3),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"3\"), eventsNo > pageSize * 4 && __jsx(SearchParamButton, {\n    isSelected: pageNo === 2,\n    onClick: () => selectPageNo(2),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"2\"), __jsx(SearchParamButton, {\n    isSelected: pageNo === 3,\n    onClick: () => selectPageNo(3),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"3\"), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"Items per page:\"), __jsx(SearchParamButton, {\n    isSelected: pageSize === 5,\n    onClick: () => setPageSize(5),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"5\"), __jsx(SearchParamButton, {\n    isSelected: pageSize === 15,\n    onClick: () => setPageSize(15),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, \"15\"), __jsx(SearchParamButton, {\n    isSelected: pageSize === 22,\n    onClick: () => setPageSize(25),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"25\")));\n};\n\nexport default Search;","map":{"version":3,"sources":["/Users/mj/repo/siliconrhino/components/search/Search.tsx"],"names":["styled","useState","useEffect","DebounceInput","axios","EventThumbnail","SearchWrapper","div","SearchParamButton","props","isSelected","SearchInput","PageNumberButtonWrapper","Search","pageNo","selectPageNo","pageSize","setPageSize","searchQ","setSearchQ","allEvents","setEvents","isLoading","setLoading","isError","setError","eventsNo","setEventsNo","getEvents","res","get","evnts","data","length","err","event","target","value","map","id","time","title","creator","guests","type","location","comments"],"mappings":";;;AAAA,OAAOA,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAAQC,aAAR,QAA4B,sBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,cAAP,MAA2B,yBAA3B;AACA,MAAMC,aAAa,GAAGN,MAAM,CAACO,GAAV;AAAA;AAAA;AAAA,QAAnB;AAGA,MAAMC,iBAAiB,GAAGR,MAAM,CAACO,GAAV;AAAA;AAAA;AAAA,iJAONE,KAAD,IAAWA,KAAK,CAACC,UAAN,GAAmB,MAAnB,GAA4B,MAPhC,CAAvB;AAUA,MAAMC,WAAW,GAAGX,MAAM,CAACG,aAAD,CAAT;AAAA;AAAA;AAAA,yCAAjB;AAKA,MAAMS,uBAAuB,GAAGZ,MAAM,CAACO,GAAV;AAAA;AAAA;AAAA,kDAA7B;;AAOA,MAAMM,MAAM,GAAG,MAAM;AACnB,QAAM;AAAA,OAACC,MAAD;AAAA,OAASC;AAAT,MAAyBd,QAAQ,CAAC,CAAD,CAAvC;AACA,QAAM;AAAA,OAACe,QAAD;AAAA,OAAWC;AAAX,MAA0BhB,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM;AAAA,OAACiB,OAAD;AAAA,OAAUC;AAAV,MAAwBlB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM;AAAA,OAACmB,SAAD;AAAA,OAAYC;AAAZ,MAAyBpB,QAAQ,CAAU,EAAV,CAAvC;AACA,QAAM;AAAA,OAACqB,SAAD;AAAA,OAAYC;AAAZ,MAA0BtB,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM;AAAA,OAACuB,OAAD;AAAA,OAAUC;AAAV,MAAsBxB,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACyB,QAAD;AAAA,OAAWC;AAAX,MAA0B1B,QAAQ,CAAC,CAAD,CAAxC;AACAC,EAAAA,SAAS,CAAC,MAAM;AACd0B,IAAAA,SAAS;AACV,GAFQ,EAEN,EAFM,CAAT;AAGA1B,EAAAA,SAAS,CAAC,MACV;AACE0B,IAAAA,SAAS;AACV,GAHQ,EAGN,CAACZ,QAAD,EAAWF,MAAX,EAAmBI,OAAnB,CAHM,CAAT;;AAKA,QAAMU,SAAS,GAAG,YAAY;AAC5BL,IAAAA,UAAU,CAAC,IAAD,CAAV;;AACA,QAAI;AACF,YAAMM,GAAG,GAAG,MAAMzB,KAAK,CAAC0B,GAAN,CAAW,4DAA2DhB,MAAO,aAAYE,QAAS,WAAUE,OAAQ,EAApH,CAAlB;AACA,YAAMa,KAAc,GAAGF,GAAG,CAACG,IAA3B;AACAX,MAAAA,SAAS,CAACU,KAAD,CAAT;AACAJ,MAAAA,WAAW,CAACI,KAAK,CAACE,MAAN,GAAe,CAAhB,CAAX;AACAV,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAND,CAOA,OAAOW,GAAP,EAAY;AACVX,MAAAA,UAAU,CAAC,KAAD,CAAV;AACAE,MAAAA,QAAQ,CAAC,IAAD,CAAR;AACD;AACF,GAbD;;AAeA,MAAID,OAAJ,EAAa;AACX,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF;AAGD;;AACD,SACE,MAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AACE,IAAA,SAAS,EAAE,CADb;AAEE,IAAA,eAAe,EAAE,GAFnB;AAGE,IAAA,WAAW,EAAE,MAHf,CAIE;AAJF;AAKE,IAAA,QAAQ,EAAEW,KAAK,IAAIhB,UAAU,CAACgB,KAAK,CAACC,MAAN,CAAaC,KAAd,CAL/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF,EAUIf,SAAS,GACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADS,GAGTF,SAAS,CAACkB,GAAV,CAAeH,KAAD,IACZ,MAAC,cAAD;AACE,IAAA,EAAE,EAAEA,KAAK,CAACI,EADZ;AAEE,IAAA,IAAI,EAAEJ,KAAK,CAACK,IAFd;AAGE,IAAA,KAAK,EAAEL,KAAK,CAACM,KAHf;AAIE,IAAA,OAAO,EAAEN,KAAK,CAACO,OAJjB;AAKE,IAAA,MAAM,EAAEP,KAAK,CAACQ,MALhB;AAME,IAAA,IAAI,EAAER,KAAK,CAACS,IANd;AAOE,IAAA,QAAQ,EAAET,KAAK,CAACU,QAPlB;AAQE,IAAA,QAAQ,EAAEV,KAAK,CAACW,QARlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAbJ,EA0BE,MAAC,uBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBALF,EAME,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAEhC,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SANF,EAOGW,QAAQ,GAAGV,QAAX,IAAuB,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAEF,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAP1B,EAQGW,QAAQ,GAAGV,QAAQ,GAAG,CAAtB,IAA2B,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAEF,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAR9B,EAQiI,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAED,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SARjI,EASGW,QAAQ,GAAGV,QAAQ,GAAG,CAAtB,IAA2B,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAEF,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAT9B,EASiI,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAED,MAAM,KAAK,CAA1C;AAA6C,IAAA,OAAO,EAAE,MAAMC,YAAY,CAAC,CAAD,CAAxE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SATjI,EAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAVF,EAWE,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAEC,QAAQ,KAAK,CAA5C;AAA+C,IAAA,OAAO,EAAE,MAAMC,WAAW,CAAC,CAAD,CAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAXF,EAYE,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAED,QAAQ,KAAK,EAA5C;AAAgD,IAAA,OAAO,EAAE,MAAMC,WAAW,CAAC,EAAD,CAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAZF,EAaE,MAAC,iBAAD;AAAmB,IAAA,UAAU,EAAED,QAAQ,KAAK,EAA5C;AAAgD,IAAA,OAAO,EAAE,MAAMC,WAAW,CAAC,EAAD,CAA1E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAbF,CA1BF,CADF;AA4CD,CAhFD;;AAkFA,eAAeJ,MAAf","sourcesContent":["import styled from 'styled-components'\nimport { useState, useEffect } from 'react'\nimport {DebounceInput} from 'react-debounce-input'\nimport axios from 'axios'\nimport { Event } from '../../pages/e/event.types'\nimport EventThumbnail from '../event/EventThumbnail'\nconst SearchWrapper = styled.div`\n`\n\nconst SearchParamButton = styled.div<{isSelected: boolean}>`\n  display: grid;\n  justify-content: center;\n  place-items: center;\n  font-weight: bold;\n  border: 1px solid black;\n  box-shadow: 0 0 0 0 black;\n  background: ${(props) => props.isSelected ? 'blue' : 'none'};\n`\n\nconst SearchInput = styled(DebounceInput)`\n  width: 50%;\n  border: 1px solid black;\n`\n\nconst PageNumberButtonWrapper = styled.div`\n  display: flex;\n  justify-content: space-around;\n`\n\n\n\nconst Search = () => {\n  const [pageNo, selectPageNo] = useState(1)\n  const [pageSize, setPageSize] = useState(2)\n  const [searchQ, setSearchQ] = useState('')\n  const [allEvents, setEvents] = useState<Event[]>([])\n  const [isLoading, setLoading] = useState(false)\n  const [isError, setError] = useState(false)\n  const [eventsNo, setEventsNo] = useState(0)\n  useEffect(() => {\n    getEvents()\n  }, [])\n  useEffect(() =>\n  {\n    getEvents()\n  }, [pageSize, pageNo, searchQ])\n\n  const getEvents = async () => {\n    setLoading(true)\n    try {\n      const res = await axios.get(`https://mock-api.drinks.test.siliconrhino.io/events?page=${pageNo}&pageSize=${pageSize}&search=${searchQ}`)\n      const evnts: Event[] = res.data\n      setEvents(evnts)\n      setEventsNo(evnts.length + 1)\n      setLoading(false)\n    }\n    catch (err) {\n      setLoading(false)\n      setError(true)\n    }\n  }\n\n  if (isError) {\n    return (\n      <div>Failed to load data.</div>\n    )\n  }\n  return (\n    <SearchWrapper>\n      <SearchInput\n        minLength={1}\n        debounceTimeout={300}\n        placeholder={'asdf'}\n        //@ts-ignore\n        onChange={event => setSearchQ(event.target.value)}\n      />\n      <div>events: </div>\n      {\n        isLoading ?\n        <div>loading...</div>\n      :\n        allEvents.map((event) => (\n          <EventThumbnail\n            id={event.id}\n            time={event.time}\n            title={event.title}\n            creator={event.creator}\n            guests={event.guests}\n            type={event.type}\n            location={event.location}\n            comments={event.comments}\n          />\n        ))\n      }\n      <PageNumberButtonWrapper>\n        {\n          // lets say i got 8 events\n          // how do I determine how many +5 will fit before we run out of events?\n        }\n        <div>Current page:</div>\n        <SearchParamButton isSelected={pageNo === 1} onClick={() => selectPageNo(1)}>1</SearchParamButton>\n        {eventsNo > pageSize && <SearchParamButton isSelected={pageNo === 2} onClick={() => selectPageNo(2)}>2</SearchParamButton>}\n        {eventsNo > pageSize * 2 && <SearchParamButton isSelected={pageNo === 2} onClick={() => selectPageNo(2)}>2</SearchParamButton>}<SearchParamButton isSelected={pageNo === 3} onClick={() => selectPageNo(3)}>3</SearchParamButton>\n        {eventsNo > pageSize * 4 && <SearchParamButton isSelected={pageNo === 2} onClick={() => selectPageNo(2)}>2</SearchParamButton>}<SearchParamButton isSelected={pageNo === 3} onClick={() => selectPageNo(3)}>3</SearchParamButton>\n        <div>Items per page:</div>\n        <SearchParamButton isSelected={pageSize === 5} onClick={() => setPageSize(5)}>5</SearchParamButton>\n        <SearchParamButton isSelected={pageSize === 15} onClick={() => setPageSize(15)}>15</SearchParamButton>\n        <SearchParamButton isSelected={pageSize === 22} onClick={() => setPageSize(25)}>25</SearchParamButton>\n      </PageNumberButtonWrapper>\n    </SearchWrapper>\n  )\n}\n\nexport default Search"]},"metadata":{},"sourceType":"module"}